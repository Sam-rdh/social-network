<div class="d-flex flex-column align-items-center min-vh-100 py-4">
  <!-- Cr√©ation de post -->
  <div class="card rounded-xxl soft-shadow mb-4 w-100" style="max-width: 640px;">
    <div class="card-body">
      <textarea class="form-control mb-3" rows="3" [(ngModel)]="content" placeholder="Quoi de neuf ?"></textarea>
      <div class="d-flex justify-content-end">
        <button class="btn btn-primary px-4" (click)="postsService.addPost(content)">Publier</button>
      </div>
    </div>
  </div>

  <!-- Loader -->
  <div *ngIf="ui.isLoading" class="loader"></div>

  <!-- Feed -->
  <div class="w-100" style="max-width: 640px;" *ngIf="!ui.isLoading">
    <div *ngFor="let post of (postsService.postSubject$ | async) | slice:0:visiblePostsCount" class="card rounded-xxl soft-shadow soft-shadow-hover mb-3">
      <div class="card-body d-flex align-items-start gap-3">
        <img *ngIf="getPictureById(idDivise10(post.userId!))"
             [src]="getPictureById(idDivise10(post.userId!))"
             class="avatar"
             alt="Avatar">

        <div class="flex-grow-1">
          <h6 class="mb-1">
            <a href="#" (click)="goToFriendProfil(idDivise10(post.userId!)); $event.preventDefault();">
              {{ friendsService.idGetFriendSelected(idDivise10(post.userId!))?.firstName }}
              {{ friendsService.idGetFriendSelected(idDivise10(post.userId!))?.lastName }}
            </a>
          </h6>
          <p class="mb-2">{{ post.body }}</p>

          <div class="d-flex align-items-center gap-2">
            <small class="text-muted">{{ post.reactions.likes }}</small>
            <button class="btn btn-sm btn-light like-btn" (click)="postsService.toggleLike(post.id, post.userId!)">
              <span *ngIf="post.likedBy.includes(post.userId!)">üíî Retirer</span>
              <span *ngIf="!post.likedBy.includes(post.userId!)">‚ù§Ô∏è J‚Äôaime</span>
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="text-center">
      <button class="btn btn-primary" type="button" (click)="visiblePostsCount = visiblePostsCount + 4">Afficher plus</button>
    </div>
  </div>
</div>